<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Loading...</title>
    <meta name="description" id="meta-description" content="">
    <meta name="keywords" id="meta-keywords" content="">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" id="og-url" content="">
    <meta property="article:published_time" id="article-published" content="">
    <meta property="og:title" id="og-title" content="">
    <meta property="og:description" id="og-description" content="">
    <meta property="og:image" id="og-image" content="">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" id="twitter-url" content="">
    <meta property="twitter:title" id="twitter-title" content="">
    <meta property="twitter:description" id="twitter-description" content="">
    <meta property="twitter:image" id="twitter-image" content="">

    <link rel="canonical" id="canonical-url" href="">
    <link rel="stylesheet" href="styles.css">

    <!-- Load configuration -->
    <script src="pieces-config.js"></script>

    <!-- Artwork and Article Schema -->
    <script type="application/ld+json" id="schema-json">[]</script>
</head>
<body>
    <nav class="main-nav">
        <div class="nav-content">
            <a href="index.html" class="logo">Kavin Lam</a>
            <div class="nav-links">
                <a href="index.html" class="active">Work</a>
                <a href="about.html">About</a>
                <a href="commissions.html">Commissions</a>
                <a href="contact.html">Contact</a>
            </div>
        </div>
    </nav>

    <main class="piece-container">
        <nav class="piece-navigation" id="piece-nav">
            <!-- Navigation populated by JavaScript -->
        </nav>

        <div class="piece-images" id="piece-images">
            <!-- Images populated by JavaScript -->
        </div>

        <div class="piece-details">
            <h1 id="piece-title">Loading...</h1>
            <p class="piece-meta" id="piece-meta">
                <!-- Metadata populated by JavaScript -->
            </p>

            <button class="learn-more-btn" onclick="toggleDetails(this)">Learn More</button>

            <div class="piece-details-extended" id="piece-details-extended">
                <!-- Details populated by JavaScript -->
            </div>
        </div>

        <script>
        // Get piece ID from filename (piece-3.html -> piece-3)
        const pieceId = 'piece-3';
        const piece = piecesConfig[pieceId];
        const baseUrl = 'https://kavinlam.com';

        if (piece) {
            // Set page title and meta
            document.getElementById('page-title').textContent = `${piece.shortTitle} - Handmade Ceramic Pottery | Kavin Lam Atlanta`;
            document.getElementById('meta-description').setAttribute('content', piece.seo.metaDescription);
            document.getElementById('meta-keywords').setAttribute('content', piece.seo.keywords);

            // Set Open Graph meta
            document.getElementById('og-url').setAttribute('content', `${baseUrl}/${pieceId}.html`);
            document.getElementById('article-published').setAttribute('content', piece.date + 'T00:00:00Z');
            document.getElementById('og-title').setAttribute('content', piece.seo.ogTitle);
            document.getElementById('og-description').setAttribute('content', piece.seo.ogDescription);
            document.getElementById('og-image').setAttribute('content', `${baseUrl}/images/${pieceId}/${piece.images[0]}`);

            // Set Twitter meta
            document.getElementById('twitter-url').setAttribute('content', `${baseUrl}/${pieceId}.html`);
            document.getElementById('twitter-title').setAttribute('content', piece.seo.ogTitle);
            document.getElementById('twitter-description').setAttribute('content', piece.seo.ogDescription);
            document.getElementById('twitter-image').setAttribute('content', `${baseUrl}/images/${pieceId}/${piece.images[0]}`);

            // Set canonical URL
            document.getElementById('canonical-url').setAttribute('href', `${baseUrl}/${pieceId}.html`);

            // Generate schema JSON
            const schemaData = [
                {
                    "@context": "https://schema.org",
                    "@type": "VisualArtwork",
                    "name": piece.title,
                    "artform": "Ceramic Pottery",
                    "artMedium": piece.schema.artMedium,
                    "dateCreated": piece.date,
                    "creator": {
                        "@type": "Person",
                        "name": "Kavin Lam",
                        "jobTitle": "Ceramic Artist",
                        "address": {
                            "@type": "PostalAddress",
                            "addressLocality": "Atlanta",
                            "addressRegion": "GA"
                        }
                    },
                    "locationCreated": {
                        "@type": "Place",
                        "name": piece.location
                    },
                    "image": `${baseUrl}/images/${pieceId}/${piece.images[0]}`
                },
                {
                    "@context": "https://schema.org",
                    "@type": "BlogPosting",
                    "headline": piece.title,
                    "description": piece.schema.blogDescription,
                    "image": `${baseUrl}/images/${pieceId}/${piece.images[0]}`,
                    "datePublished": piece.date,
                    "dateModified": piece.date,
                    "author": {
                        "@type": "Person",
                        "name": "Kavin Lam"
                    },
                    "publisher": {
                        "@type": "Person",
                        "name": "Kavin Lam"
                    }
                }
            ];
            document.getElementById('schema-json').textContent = JSON.stringify(schemaData, null, 2);

            // Populate navigation
            const prevPiece = getPreviousPiece(pieceId);
            const nextPiece = getNextPiece(pieceId);
            let navHtml = '';
            if (prevPiece) {
                navHtml += `<a href="${prevPiece}.html" class="piece-nav-link">← Previous</a>`;
            }
            navHtml += '<a href="index.html" class="piece-nav-link">Back to Work</a>';
            if (nextPiece) {
                navHtml += `<a href="${nextPiece}.html" class="piece-nav-link">Next →</a>`;
            }
            document.getElementById('piece-nav').innerHTML = navHtml;

            // Populate images
            let imagesHtml = '';
            piece.images.forEach((img, index) => {
                imagesHtml += `
                    <div class="piece-image">
                        <img src="images/${pieceId}/${img}" alt="${piece.altTexts[index] || piece.title}">
                    </div>
                `;
            });
            document.getElementById('piece-images').innerHTML = imagesHtml;

            // Populate piece details
            document.getElementById('piece-title').textContent = piece.title;
            document.getElementById('piece-meta').innerHTML = `
                <time datetime="${piece.date}">${piece.dateDisplay}</time><br>
                ${piece.material}<br>
                ${piece.glaze}<br>
                Fired at ${piece.location}
            `;

            // Populate extended details
            document.getElementById('piece-details-extended').innerHTML = piece.detailsHtml;
        }

        function toggleDetails(button) {
            const detailsSection = button.nextElementSibling;
            detailsSection.classList.toggle('expanded');
            button.textContent = detailsSection.classList.contains('expanded') ? 'Show Less' : 'Learn More';
        }
        </script>
    </main>

    <footer>
        <p>&copy; 2025 Kavin Lam. All rights reserved.</p>
    </footer>
</body>
</html>
